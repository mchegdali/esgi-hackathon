{"version":3,"file":"note-7a795fc4.js","sources":["../../src/note.ts"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\n\nconsole.log(\"Script started successfully note.ts\");\n\ninterface Perso {\n  name: string;\n  description: string;\n}\n\n// let currentIndex = 0; // Index du personnage actuellement affiché\nlet displayedCharacters: Perso[] = []; // Tableau pour stocker l'ordre des personnages déjà affichés\n\n// Définir les personnages célèbres pour le jeu\nconst personnage: Perso[] = [\n  {\n    name: \"Albert Einstein\",\n    description:\n      \"JE suis Physicien théoricien connu pour sa théorie de la relativité.\",\n  },\n  {\n    name: \"Marie Curie\",\n    description:\n      \"Physicienne et chimiste pionnière dans l'étude de la radioactivité.\",\n  },\n  {\n    name: \"William Shakespeare\",\n    description: \" Un PNJ dans une bibliothèque ou un théâtre.\",\n  },\n  {\n    name: \"Napoléon Bonaparte\",\n    description: \" Un PNJ dans une zone historique ou militaire.\",\n  },\n  {\n    name: \"Cleopatra\",\n    description: \"Un PNJ dans une zone égyptienne ou historique.\",\n  },\n  {\n    name: \"Steve Jobs\",\n    description: \"Un PNJ dans une zone technologique ou informatique.\",\n  },\n  {\n    name: \"Marilyn Monroe\",\n    description: \"Un PNJ dans une zone de divertissement ou de cinéma.\",\n  },\n  {\n    name: \"James Bond\",\n    description: \"Un PNJ dans une zone secrète ou d'espionnage.\",\n  },\n  {\n    name: \"Charlie Chaplin\",\n    description: \"Un PNJ dans une zone de comédie ou de cinéma muet.\",\n  },\n];\n\nfunction selectRandomCharacter(): Perso {\n  let availableCharacters = personnage.filter(\n    (character) => !displayedCharacters.includes(character)\n  );\n  if (availableCharacters.length === 0) {\n    // Tous les personnages ont déjà été affichés, réinitialiser l'ordre\n    displayedCharacters = [];\n    availableCharacters = personnage;\n  }\n  const randomIndex = Math.floor(Math.random() * availableCharacters.length);\n  const selectedCharacter = availableCharacters[randomIndex];\n  return selectedCharacter;\n}\n\nfunction next() {\n  const nextPage = document.getElementById(\"savedButton\");\n  if (nextPage) {\n    nextPage.addEventListener(\"click\", () => {\n      let randomCharacter;\n\n      // Tant qu'un personnage déjà affiché est sélectionné, continuez à en choisir un nouveau\n      while (true) {\n        randomCharacter = selectRandomCharacter();\n\n        // Vérifiez si le personnage sélectionné n'a pas encore été affiché\n        if (!displayedCharacters.includes(randomCharacter)) {\n          break; // Sortez de la boucle une fois qu'un personnage non affiché est sélectionné\n        }\n      }\n\n      // Mettre à jour le contenu du h1 avec le nouveau personnage\n      const descriptionElement = document.getElementById(\"description\");\n      if (descriptionElement) {\n        descriptionElement.textContent = randomCharacter.description;\n      }\n\n      // Ajouter le personnage à la liste des personnages affichés\n      displayedCharacters.push(randomCharacter);\n    });\n    console.log(\"Bouton next actif\");\n  }\n}\n\n// Fonction pour dynamiser le contenu du h1 avec la description d'un personnage aléatoire\nfunction dynamiserH1AvecDescription() {\n  const randomCharacter = selectRandomCharacter(); // Sélectionner un personnage aléatoire\n  const descriptionElement = document.getElementById(\"description\");\n  if (descriptionElement) {\n    descriptionElement.textContent = randomCharacter.description; // Mettre à jour le contenu du h1 avec la description du personnage\n  }\n}\n\n// Fonction pour afficher le score\nfunction afficherScore(score: number) {\n  const scoreElement = document.getElementById(\"score\");\n  if (scoreElement) {\n    scoreElement.textContent = score.toString();\n  }\n\n  // Affichez le bloc du score\n  const scoreDisplay = document.getElementById(\"scoreDisplay\");\n  if (scoreDisplay) {\n    scoreDisplay.style.display = \"block\";\n  }\n}\n\nfunction gestionValidate() {\n  const joueurId = WA.player.uuid;\n  let score = 0;\n\n  let scoring = new Map();\n  const savedButton = document.getElementById(\"savedButton\");\n  const noteTextArea = document.getElementById(\n    \"noteTextArea\"\n  ) as HTMLTextAreaElement; // Récupérer le texte entré dans la zone de texte\n  if (noteTextArea) {\n    const enteredText = noteTextArea.value.trim();\n    console.log(enteredText);\n  }\n  if (savedButton) {\n    savedButton.addEventListener(\"click\", () => {\n      let celebritieName = \"\";\n      const noteTextArea = document.getElementById(\n        \"noteTextArea\"\n      ) as HTMLTextAreaElement;\n      const descriptionElement = document.getElementById(\n        \"description\"\n      ) as HTMLHeadingElement;\n      if (noteTextArea) {\n        const enteredText = noteTextArea.value.trim().toLocaleLowerCase(); // Récupérer le texte entré dans la zone de texte\n        const characterName = descriptionElement.innerText\n          .trim()\n          .toLocaleLowerCase();\n\n        for (let i = 0; i < personnage.length; i++) {\n          if (\n            characterName.trim().toLocaleLowerCase() ===\n            personnage[i].description.trim().toLocaleLowerCase()\n          ) {\n            celebritieName = personnage[i].name.trim().toLocaleLowerCase();\n            if (celebritieName === enteredText) {\n              score = score + 1;\n              scoring.set(joueurId, score);\n              WA.player.state.saveVariable(\"noteText\", scoring);\n              personnage.splice(i, 1);\n              next();\n              if (personnage.length === 0) {\n                afficherScore(score);\n              }\n            } else {\n              scoring.set(joueurId, score);\n              WA.player.state.saveVariable(\"noteText\", scoring);\n              personnage.splice(i, 1);\n              next();\n              if (personnage.length === 0) {\n                afficherScore(score);\n              }\n            }\n          }\n        }\n      }\n    });\n  } else {\n    console.error(\"Le bouton n'existe pas.\");\n  }\n}\n\n// Appeler la fonction pour dynamiser le contenu du h1 lors du chargement de la page\nwindow.onload = function () {\n  WA.onInit().then(() => {\n    dynamiserH1AvecDescription();\n    gestionValidate();\n  });\n};\n\nexport {};\n"],"names":["displayedCharacters","personnage","selectRandomCharacter","availableCharacters","character","randomIndex","next","nextPage","randomCharacter","descriptionElement","dynamiserH1AvecDescription","afficherScore","score","scoreElement","scoreDisplay","gestionValidate","joueurId","scoring","savedButton","noteTextArea","enteredText","celebritieName","characterName","i"],"mappings":"ssBAEA,QAAQ,IAAI,qCAAqC,EAQjD,IAAIA,EAA+B,CAAA,EAGnC,MAAMC,EAAsB,CAC1B,CACE,KAAM,kBACN,YACE,sEACJ,EACA,CACE,KAAM,cACN,YACE,qEACJ,EACA,CACE,KAAM,sBACN,YAAa,8CACf,EACA,CACE,KAAM,qBACN,YAAa,gDACf,EACA,CACE,KAAM,YACN,YAAa,gDACf,EACA,CACE,KAAM,aACN,YAAa,qDACf,EACA,CACE,KAAM,iBACN,YAAa,sDACf,EACA,CACE,KAAM,aACN,YAAa,+CACf,EACA,CACE,KAAM,kBACN,YAAa,oDACf,CACF,EAEA,SAASC,GAA+B,CACtC,IAAIC,EAAsBF,EAAW,OAClCG,GAAc,CAACJ,EAAoB,SAASI,CAAS,CAAA,EAEpDD,EAAoB,SAAW,IAEjCH,EAAsB,CAAA,EACAG,EAAAF,GAExB,MAAMI,EAAc,KAAK,MAAM,KAAK,SAAWF,EAAoB,MAAM,EAElE,OADmBA,EAAoBE,CAAW,CAE3D,CAEA,SAASC,GAAO,CACR,MAAAC,EAAW,SAAS,eAAe,aAAa,EAClDA,IACOA,EAAA,iBAAiB,QAAS,IAAM,CACnC,IAAAC,EAGJ,KACEA,EAAkBN,EAAsB,EAGpC,EAACF,EAAoB,SAASQ,CAAe,GAAjD,CAMI,MAAAC,EAAqB,SAAS,eAAe,aAAa,EAC5DA,IACFA,EAAmB,YAAcD,EAAgB,aAInDR,EAAoB,KAAKQ,CAAe,CAAA,CACzC,EACD,QAAQ,IAAI,mBAAmB,EAEnC,CAGA,SAASE,GAA6B,CACpC,MAAMF,EAAkBN,IAClBO,EAAqB,SAAS,eAAe,aAAa,EAC5DA,IACFA,EAAmB,YAAcD,EAAgB,YAErD,CAGA,SAASG,EAAcC,EAAe,CAC9B,MAAAC,EAAe,SAAS,eAAe,OAAO,EAChDA,IACWA,EAAA,YAAcD,EAAM,YAI7B,MAAAE,EAAe,SAAS,eAAe,cAAc,EACvDA,IACFA,EAAa,MAAM,QAAU,QAEjC,CAEA,SAASC,GAAkB,CACnB,MAAAC,EAAW,GAAG,OAAO,KAC3B,IAAIJ,EAAQ,EAERK,MAAc,IACZ,MAAAC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAe,SAAS,eAC5B,cAAA,EAEF,GAAIA,EAAc,CACV,MAAAC,EAAcD,EAAa,MAAM,KAAK,EAC5C,QAAQ,IAAIC,CAAW,CACzB,CACIF,EACUA,EAAA,iBAAiB,QAAS,IAAM,CAC1C,IAAIG,EAAiB,GACrB,MAAMF,EAAe,SAAS,eAC5B,cAAA,EAEIV,EAAqB,SAAS,eAClC,aAAA,EAEF,GAAIU,EAAc,CAChB,MAAMC,EAAcD,EAAa,MAAM,OAAO,kBAAkB,EAC1DG,EAAgBb,EAAmB,UACtC,OACA,kBAAkB,EAErB,QAASc,EAAI,EAAGA,EAAItB,EAAW,OAAQsB,IAEnCD,EAAc,OAAO,sBACrBrB,EAAWsB,CAAC,EAAE,YAAY,KAAO,EAAA,kBAAA,IAEjCF,EAAiBpB,EAAWsB,CAAC,EAAE,KAAK,KAAA,EAAO,oBACvCF,IAAmBD,GACrBR,EAAQA,EAAQ,EACRK,EAAA,IAAID,EAAUJ,CAAK,EAC3B,GAAG,OAAO,MAAM,aAAa,WAAYK,CAAO,EACrChB,EAAA,OAAOsB,EAAG,CAAC,EACjBjB,IACDL,EAAW,SAAW,GACxBU,EAAcC,CAAK,IAGbK,EAAA,IAAID,EAAUJ,CAAK,EAC3B,GAAG,OAAO,MAAM,aAAa,WAAYK,CAAO,EACrChB,EAAA,OAAOsB,EAAG,CAAC,EACjBjB,IACDL,EAAW,SAAW,GACxBU,EAAcC,CAAK,GAK7B,CAAA,CACD,EAED,QAAQ,MAAM,yBAAyB,CAE3C,CAGA,OAAO,OAAS,UAAY,CACvB,GAAA,SAAS,KAAK,IAAM,CACMF,IACXK,GAAA,CACjB,CACH"}